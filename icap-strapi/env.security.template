# ðŸ”’ Banking Grade Environment Variables Template
# ICAP Banking Platform - Security Configuration
# 
# IMPORTANT: 
# 1. Copy this file to .env
# 2. Generate strong, unique secrets for each variable
# 3. Never commit .env files to version control
# 4. Use different secrets for each environment (dev/staging/prod)

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_NAME=icap_banking_db
DATABASE_USERNAME=icap_db_user
DATABASE_PASSWORD=your-super-secure-database-password-change-this

# Database SSL Configuration (for production)
DATABASE_SSL_CA=/path/to/ca-certificate.crt
DATABASE_SSL_CERT=/path/to/client-certificate.crt
DATABASE_SSL_KEY=/path/to/client-key.key

# =============================================================================
# AUTHENTICATION SECRETS
# =============================================================================

# JWT Secrets (Generate unique secrets for each)
JWT_SECRET=your-super-secure-jwt-secret-minimum-32-characters-long
ADMIN_JWT_SECRET=your-super-secure-admin-jwt-secret-minimum-32-characters-long
SESSION_SECRET=your-super-secure-session-secret-minimum-32-characters-long

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Cache
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-super-secure-redis-password-change-this

# =============================================================================
# API SECURITY
# =============================================================================

# API Rate Limiting
API_RATE_LIMIT_MAX=100
API_RATE_LIMIT_WINDOW_MS=900000

# CORS Configuration
CORS_ORIGIN=https://icap-bank.com,https://www.icap-bank.com
CORS_CREDENTIALS=true

# =============================================================================
# FILE UPLOAD SECURITY
# =============================================================================

# File Upload Limits
UPLOAD_SIZE_LIMIT=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Configuration (for password reset, notifications)
SMTP_HOST=smtp.icap-bank.com
SMTP_PORT=587
SMTP_USER=noreply@icap-bank.com
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=noreply@icap-bank.com
SMTP_REPLY_TO=support@icap-bank.com

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Logging Configuration
LOG_LEVEL=info
LOG_REQUESTS=true
LOG_ERRORS=true
LOG_WARNINGS=true

# Monitoring Endpoints
PROMETHEUS_ENDPOINT=http://monitoring:9090
ELASTICSEARCH_ENDPOINT=http://elasticsearch:9200

# =============================================================================
# SECURITY HEADERS
# =============================================================================

# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_CONNECT_SRC='self'
CSP_FONT_SRC='self'
CSP_OBJECT_SRC='none'
CSP_MEDIA_SRC='self'
CSP_FRAME_SRC='none'

# Security Headers
X_FRAME_OPTIONS=SAMEORIGIN
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Backup Settings
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key

# =============================================================================
# ENVIRONMENT SPECIFIC
# =============================================================================

# Environment
NODE_ENV=production
STRAPI_TELEMETRY_DISABLED=true

# Development Overrides (comment out in production)
# CORS_ORIGIN=http://localhost:3000,http://localhost:5173
# LOG_LEVEL=debug

# =============================================================================
# COMPLIANCE & AUDITING
# =============================================================================

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_RETENTION_DAYS=365

# Compliance Tracking
COMPLIANCE_PCI_DSS=true
COMPLIANCE_SOX=true
COMPLIANCE_ISO_27001=true

# =============================================================================
# NETWORK SECURITY
# =============================================================================

# Network Configuration
INTERNAL_NETWORK_SUBNET=10.0.1.0/24
DMZ_NETWORK_SUBNET=192.168.1.0/24

# Firewall Rules
FIREWALL_ALLOW_SSH=false
FIREWALL_ALLOW_VPN=true
FIREWALL_ALLOW_HTTPS=true

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================

# SSL Certificate Paths
SSL_CERT_PATH=/etc/nginx/ssl/icap-bank.crt
SSL_KEY_PATH=/etc/nginx/ssl/icap-bank.key
SSL_CA_PATH=/etc/nginx/ssl/ca-bundle.crt

# TLS Configuration
TLS_VERSION=1.3
TLS_CIPHERS=ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256

# =============================================================================
# SECURITY MONITORING
# =============================================================================

# Intrusion Detection
IDS_ENABLED=true
IDS_RULES_PATH=/etc/snort/rules
IDS_LOG_PATH=/var/log/snort

# Security Information and Event Management (SIEM)
SIEM_ENDPOINT=https://siem.icap-bank.com
SIEM_API_KEY=your-siem-api-key

# =============================================================================
# DISASTER RECOVERY
# =============================================================================

# Recovery Configuration
RTO_HOURS=4
RPO_HOURS=1
BACKUP_LOCATION=/opt/icap/backups
RECOVERY_SITE_ENDPOINT=https://dr.icap-bank.com

# =============================================================================
# ACCESS CONTROL
# =============================================================================

# Admin Access
ADMIN_IP_WHITELIST=192.168.1.0/24,10.0.1.0/24
ADMIN_2FA_ENABLED=true
ADMIN_SESSION_TIMEOUT=3600

# API Access
API_KEY_REQUIRED=true
API_KEY_HEADER=X-API-Key
API_RATE_LIMIT_BY_IP=true

# =============================================================================
# ENCRYPTION KEYS (Generate unique keys for each environment)
# =============================================================================

# Data Encryption
DATA_ENCRYPTION_KEY=your-32-character-data-encryption-key
FILE_ENCRYPTION_KEY=your-32-character-file-encryption-key
BACKUP_ENCRYPTION_KEY=your-32-character-backup-encryption-key

# =============================================================================
# THIRD-PARTY INTEGRATIONS (if needed)
# =============================================================================

# External APIs (if required)
EXTERNAL_API_KEY=your-external-api-key
EXTERNAL_API_SECRET=your-external-api-secret

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================

# Application Performance
MAX_CONNECTIONS=1000
CONNECTION_TIMEOUT=30000
REQUEST_TIMEOUT=30000

# Cache Configuration
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# =============================================================================
# SECURITY ALERTS
# =============================================================================

# Alert Configuration
SECURITY_ALERT_EMAIL=security@icap-bank.com
SECURITY_ALERT_SMS=+1-XXX-XXX-XXXX
SECURITY_ALERT_WEBHOOK=https://alerts.icap-bank.com/webhook

# =============================================================================
# COMPLIANCE REPORTING
# =============================================================================

# Compliance Endpoints
COMPLIANCE_REPORT_ENDPOINT=https://compliance.icap-bank.com
COMPLIANCE_API_KEY=your-compliance-api-key
COMPLIANCE_REPORT_FREQUENCY=daily

# =============================================================================
# NOTES FOR SECURITY TEAM
# =============================================================================

# IMPORTANT SECURITY NOTES:
# 1. All secrets must be at least 32 characters long
# 2. Use different secrets for each environment
# 3. Rotate secrets regularly (every 90 days)
# 4. Monitor access logs for suspicious activity
# 5. Regular security audits required
# 6. Backup encryption keys separately
# 7. Test disaster recovery procedures monthly
# 8. Update security patches immediately
# 9. Monitor for security vulnerabilities
# 10. Document all security incidents

# SECURITY CHECKLIST:
# [ ] All secrets are unique and strong
# [ ] SSL certificates are valid and trusted
# [ ] Firewall rules are properly configured
# [ ] Access controls are implemented
# [ ] Monitoring is active and alerting
# [ ] Backups are encrypted and tested
# [ ] Compliance requirements are met
# [ ] Security documentation is complete
# [ ] Incident response plan is ready
# [ ] Regular security audits scheduled 